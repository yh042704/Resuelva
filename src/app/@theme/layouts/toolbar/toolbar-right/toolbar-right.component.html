<div class="header-button">
  <button mat-button [matMenuTriggerFor]="Notification" aria-label="mode" class="header-item">
    <a href="javascript:" class="pc-head-link badge-on-button" matBadge="4" matBadgeColor="primary"
      matBadgeOverlap="false">
      <svg class="pc-icon">
        <use xlink:href="assets/fonts/custom-icon.svg#custom-notification"></use>
      </svg>
    </a>
  </button>
  <button mat-button [matMenuTriggerFor]="user" aria-label="mode" class="header-item">
    <a class="pc-head-link">
      <img src="assets/images/user/unnamed.png" alt="user-image" class="user-avatar" />
    </a>
  </button>
  <mat-menu #Notification="matMenu" xPosition="before" class="dropdown-notification">
    <div class="dropdown-header flex align-item-center justify-content-between">
      <h5 class="m-b-0">Notification</h5>
      <a href="javascript:" class="mat-body text-primary-500">Marcar como le칤do</a>
    </div>
    <ng-scrollbar style="height: calc(100vh - 215px)" visibility="hover">
      <div class="dropdown-body">
        @for (list of mainCards; track list) {
        <h6 class="m-b-10">{{ list.day }}</h6>
        @for (card of list.cards; track card) {
        <app-card [showHeader]="false" cardClass="notification-card m-b-10" [padding]="16">
          <div class="flex">
            <div class="topic-icon flex-shrink-0">
              <svg class="pc-icon text-primary-500">
                <use attr.xlink:href="assets/fonts/custom-icon.svg#{{ card.icon }}"></use>
              </svg>
            </div>
            <div class="topic-description flex-grow-1 m-l-15">
              <span class="mat-small float-end text-muted">{{ card.time }}</span>
              <h5 class="m-b-10">{{ card.position }}</h5>
              <p class="m-b-0 mat-body">{{ card.description }}</p>
              @if (card.status === true) {
              <div class="m-t-10">
                <button mat-stroked-button class="m-r-10">Decline</button>
                <button mat-flat-button color="primary">Accept</button>
              </div>
              }
            </div>
          </div>
        </app-card>
        }
        }
      </div>
    </ng-scrollbar>
  </mat-menu>
  <mat-menu #user="matMenu" xPosition="before" class="dropdown-user-profile">
    <div class="dropdown-header flex align-item-center justify-content-between">
      <h5 class="user-title">Perfil</h5>
    </div>
    <ng-scrollbar style="height: calc(68vh - 225px)" visibility="hover">
      <div class="dropdown-body">
        <div class="flex m-b-5">
          <div class="topic-icon">
            <img src="assets/images/user/unnamed.png" alt="user-images" class="user-avatar" />
          </div>
          <div class="topic-description m-l-15">
            <h6 class="user-name">{{ usuario?.name }} 游둤</h6>
            <p class="mat-body">{{ usuario?.email }}</p>
          </div>
        </div>
        <mat-divider class="m-b-15 m-t-15"></mat-divider>
        <app-card [showHeader]="false" [padding]="16">
          <div class="flex align-items-center justify-content-between">
            <h5 class="m-b-0 flex-inline align-item-center f-16 f-w-600">
              <svg class="pc-icon text-muted m-r-10">
                <use xlink:href="assets/fonts/custom-icon.svg#custom-notification-outline"></use>
              </svg>
              Notificaciones
            </h5>
            <mat-slide-toggle [checked]="true" color="primary" (click)="$event.stopPropagation()"></mat-slide-toggle>
          </div>
        </app-card>
        <h6 class="m-b-15">Administrar</h6>
        <a href="javascript:" class="dropdown-item text-muted" (click)="clickProfile($event)">
          <svg class="pc-icon m-r-10">
            <use xlink:href="assets/fonts/custom-icon.svg#custom-setting-outline"></use>
          </svg>
          <h6 class="m-b-0">Configuraci칩n</h6>
        </a>
        <a href="javascript:" class="dropdown-item text-muted" (click)="popupVisibleChangePassword = true">
          <svg class="pc-icon m-r-10">
            <use xlink:href="assets/fonts/custom-icon.svg#custom-lock-outline"></use>
          </svg>
          <h6 class="m-b-0">Cambiar contrase침a</h6>
        </a>
        <mat-divider class="m-b-15 m-t-15"></mat-divider>
        <div class="grid m-b-15">
          <button mat-flat-button color="primary" class="user-logout" (click)="logout()">
            <div class="flex-inline align-item-center">
              <svg class="pc-icon m-r-10">
                <use xlink:href="assets/fonts/custom-icon.svg#custom-logout-1-outline"></use>
              </svg>
              Salir
            </div>
          </button>
        </div>
      </div>
    </ng-scrollbar>
  </mat-menu>
</div>

<p-dialog [(visible)]="popupVisibleChangePassword" [style]="{ width: '25rem' }">
  <ng-template #header>
    <div class="inline-flex items-center justify-center gap-2">
      <p-avatar image="assets/images/user/unnamed.png" shape="circle" />
      <span class="font-bold whitespace-nowrap">{{ usuario?.name }}</span>
    </div>
  </ng-template>
  <span class="text-surface-500 dark:text-surface-400 block mb-8">Actualizar contrase침a</span>
  <div class="flex items-center gap-4 mb-4">
    <label for="username" class="font-semibold w-24">Nueva contrase침a</label>
    <input pInputText id="username" class="flex-auto" autocomplete="off" />
  </div>
  <div class="flex items-center gap-4 mb-2">
    <label for="email" class="font-semibold w-24">Confirmar contrase침a</label>
    <input pInputText id="email" class="flex-auto" autocomplete="off" />
  </div>
  <ng-template #footer>
    <p-button label="Cambiar" [outlined]="true" severity="secondary" (click)="visible = false" />
    <p-button label="Cancelar" [text]="true" severity="secondary" (click)="visible = false" />
  </ng-template>
</p-dialog>
